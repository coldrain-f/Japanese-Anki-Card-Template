<!-- ===========================================
     단어 카드 - 뒷면 (한→일)
     =========================================== -->

<!-- 앞면 내용 유지 -->
{{FrontSide}}

<!-- 정답 영역 -->
<div class="answer-section">
    <!-- 일본어 단어 + 읽기 -->
    <div class="answer-word">
        <span class="word jp">{{Expression}}</span>
        <span class="reading-inline">{{furigana:Reading}}</span>
    </div>

    <!-- ImmersionKit 예문 -->
    {{#IMM_Sentence}}
    <div class="immersion-section">
        <div class="immersion-header">Example</div>
        <div class="immersion-content">
            {{#IMM_Image}}
            <div class="immersion-image">
                {{IMM_Image}}
            </div>
            {{/IMM_Image}}
            <div class="immersion-text">
                <div class="immersion-sentence">{{IMM_Sentence}}</div>
                <div class="immersion-footer">
                    {{#IMM_SourceMedia}}
                    <span class="immersion-source">{{IMM_SourceMedia}}</span>
                    {{/IMM_SourceMedia}}
                    {{IMM_Audio}}
                </div>
            </div>
        </div>
    </div>
    {{/IMM_Sentence}}

    <!-- 메타 정보 -->
    <div class="answer-meta">
        {{#Frequency}}<span class="frequency">#{{Frequency}}</span>{{/Frequency}}
        <a class="dict-link" href="https://ja.dict.naver.com/#/search?query={{text:Expression}}">사전 →</a>
    </div>
</div>

<!-- 이미지 확대 모달 -->
<div id="image-lightbox" class="lightbox"></div>

<script>
    (function () {
        var lightbox = document.getElementById('image-lightbox');

        var images = document.querySelectorAll('.immersion-image img');
        images.forEach(function (img) {
            img.style.cursor = 'pointer';
            img.onclick = function (e) {
                e.stopPropagation();
                lightbox.innerHTML = this.outerHTML;
                lightbox.classList.add('active');
            };
        });

        lightbox.onclick = function () {
            this.classList.remove('active');
            this.innerHTML = '';
        };
    })();
</script>